# Pipeline
apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: pipeline-input-parameter-variable
spec:
  workspaces:
    - name: pipeline-workspace
  params:
    - name: script
  tasks:
    - name: script
      workspaces:
        - name: task-workspace
          workspace: pipeline-workspace
      params:
        - name: script
          value: $(params.script)
      taskRef:
        name: detect-change-task
    - name: test-output
      when: 
      - input: ".tekton"
        operator: notin
        values: ["$(tasks.script.results.changed_directories[*])"]
      workspaces:
        - name: task-workspace
          workspace: pipeline-workspace
      params:
        - name: changeddirectories
          value: "$(tasks.script.results.changed_directories)"
      taskRef:
        name: print-changed-paths
